
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


<html>
<form id = "upload-form" class="upload-form">
   <input id="image" type="file" name="image" />
   <button type="submit">Go!</button>
</form>

<script type="text/javascript">
  $( '#upload-form' ).submit(function( event ) {
        event.preventDefault();
        var form = this;
        var input = document.getElementById('image').value;
        var file = input.split("\\");
        var fileName = file[file.length-1];

        $.get( "/getPresignedURL", { fileName: fileName, type: document.getElementById('image').files[0].type}, function( dataURL ) {

            $.ajax({
                type : 'PUT',
                url : dataURL,
                data : document.getElementById('image').files[0],
                processData: false,  // tell jQuery not to convert to form data
                contentType: document.getElementById('image').files[0].type,
                success: function(json) { console.log('Upload complete!') },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log('Upload error: ' + XMLHttpRequest.responseText);
                }
                });
         });
    
    });
</script>


